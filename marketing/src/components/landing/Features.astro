---
import SpaceDemo from './SpaceDemo.astro';
import TimelineDemo from './TimelineDemo.astro';

interface Props {
  lang: 'en' | 'de';
}

const { lang } = Astro.props;

// Shared plant data for both demos - 3 plants
const spaceData = [
  {
    id: 'veg',
    name: 'VEG',
    gridWidth: 2,
    gridHeight: 1,
    plants: [
      { id: 'p2', code: 'WW-3', stage: 'seedling' as const, gridX: 0, gridY: 0 },
    ],
  },
  {
    id: 'flower',
    name: 'FLOWER',
    gridWidth: 2,
    gridHeight: 1,
    colorIndex: 1,
    plants: [
      { id: 'p3', code: 'AK-1', stage: 'flowering' as const, gridX: 0, gridY: 0 },
      { id: 'p4', code: 'BB-1', stage: 'flowering' as const, gridX: 1, gridY: 0 },
    ],
  },
];

const timelineSpaces = [
  { id: 'veg', name: 'VEG', slots: 2 },
  { id: 'flower', name: 'FLOWER', slots: 2, colorIndex: 1 },
];

// Timeline plants - 3 plants, no overlaps in same slot
// VEG duration varies: 4-6 weeks (28-42 days)
// FLOWER duration varies: 9-11 weeks (63-77 days)
// germinating always 7d, seedling always 14d
//
// VEG slot 0: AK-1 (ends day -7) → WW-3 (starts day -7)
// FLOWER slot 0: AK-1 (starts day -7)
// FLOWER slot 1: BB-1 (starts day -21)
const timelinePlants = [
  {
    id: 'p2',
    code: 'WW-3',
    startDay: -7, // just started
    stages: [
      { stage: 'germinating', days: 7 },
      { stage: 'seedling', days: 14 },
      { stage: 'vegetative', days: 37 }, // 6 weeks veg
      { stage: 'flowering', days: 63 }, // 9 weeks flower
      { stage: 'harvested', days: 7 },
    ],
    segments: [
      { spaceId: 'veg', slotIndex: 1, startDay: -7, endDay: 48 },
      { spaceId: 'flower', slotIndex: 1, startDay: 48, endDay: null },
    ],
  },
  {
    id: 'p3',
    code: 'AK-1',
    startDay: -63, // 9 weeks ago, now in flowering
    stages: [
      { stage: 'germinating', days: 7 },
      { stage: 'seedling', days: 14 },
      { stage: 'vegetative', days: 35 }, // 5 weeks veg
      { stage: 'flowering', days: 77 }, // 11 weeks flower
      { stage: 'harvested', days: 7 },
    ],
    segments: [
      { spaceId: 'veg', slotIndex: 0, startDay: -63, endDay: -7 },
      { spaceId: 'flower', slotIndex: 0, startDay: -7, endDay: null },
    ],
  },
  {
    id: 'p4',
    code: 'BB-1',
    startDay: -70, // 10 weeks ago, now in flowering
    stages: [
      { stage: 'germinating', days: 7 },
      { stage: 'seedling', days: 10 },
      { stage: 'vegetative', days: 32 }, // ~5 weeks veg
      { stage: 'flowering', days: 60 }, // ~9 weeks flower
      { stage: 'harvested', days: 7 },
    ],
    segments: [
      { spaceId: 'veg', slotIndex: 1, startDay: -70, endDay: -21 },
      { spaceId: 'flower', slotIndex: 1, startDay: -21, endDay: null },
    ],
  },
];

const t = {
  en: {
    headline: 'Organize your grow across time and space',
    space: {
      title: 'Space View',
      subtitle: 'XY',
      desc: 'Map your tents and rooms. Drag plants between cells. See your whole setup at a glance — veg tent, flower tent, clone corner.',
      alt: 'Plantegia grow room layout planner showing plant positions across multiple tents with drag and drop interface',
    },
    time: {
      title: 'Timeline View',
      subtitle: 'XT',
      desc: 'Gantt-style schedule for your grow. See germination through harvest. Drag to shift timing. Plan weeks ahead.',
      alt: 'Perpetual harvest timeline view showing plant growth stages from germination to harvest in Gantt chart style',
    },
    toolbox: {
      label: 'Toolbox',
      cursor: { name: 'Cursor', desc: 'Select and inspect plants, spaces, and strains. Tap to view details.' },
      space: { name: 'Space', desc: 'Create new grow areas. Define custom grid sizes and light schedules.' },
      split: { name: 'Split', desc: 'Divide plant timeline at any date. Plan rotation between spaces.' },
      erase: { name: 'Erase', desc: 'Remove plants from the canvas. Clean up your layout.' },
    },
    seeds: {
      label: 'Seeds',
      desc: 'Your seed inventory. Tap to select, then tap on canvas to plant. Track seeds and clones separately.',
    },
    viewSwitch: {
      label: 'View',
      desc: 'Switch between Space (XY) and Timeline (XT) views. Different perspectives, same data.',
    },
    features: [
      {
        title: 'Perpetual harvest',
        desc: 'Stagger plants for continuous harvests. Always something ready.',
      },
      {
        title: 'Strain catalog',
        desc: 'Custom strains with veg/flower days. Auto-generated plant codes.',
      },
      {
        title: 'Lifecycle stages',
        desc: 'GRM → SDL → VEG → FLW → HRV. Customize duration per strain.',
      },
      {
        title: 'JSON export/import',
        desc: 'Export your plantation data. Perfect for AI agents and automations.',
      },
    ],
  },
  de: {
    headline: 'Organisiere deinen Grow über Zeit und Raum',
    space: {
      title: 'Space Ansicht',
      subtitle: 'XY',
      desc: 'Plane deine Zelte und Räume. Ziehe Pflanzen zwischen Zellen. Sieh dein ganzes Setup — Veg-Zelt, Blütezelt, Klon-Ecke.',
      alt: 'Plantegia Growraum Layout Planer zeigt Pflanzenpositionen in mehreren Zelten mit Drag-and-Drop',
    },
    time: {
      title: 'Timeline Ansicht',
      subtitle: 'XT',
      desc: 'Gantt-Zeitplan für deinen Grow. Sieh Keimung bis Ernte. Ziehe um Timing zu ändern. Plane Wochen voraus.',
      alt: 'Perpetual Harvest Timeline zeigt Pflanzenwachstumsphasen von Keimung bis Ernte im Gantt-Diagramm Stil',
    },
    toolbox: {
      label: 'Toolbox',
      cursor: { name: 'Cursor', desc: 'Wähle und inspiziere Pflanzen, Spaces und Sorten. Tippe für Details.' },
      space: { name: 'Space', desc: 'Erstelle neue Grow-Bereiche. Definiere Grid-Größen und Lichtpläne.' },
      split: { name: 'Split', desc: 'Teile Pflanzen-Timeline an jedem Datum. Plane Rotation zwischen Spaces.' },
      erase: { name: 'Erase', desc: 'Entferne Pflanzen vom Canvas. Räume dein Layout auf.' },
    },
    seeds: {
      label: 'Seeds',
      desc: 'Dein Samen-Inventar. Tippe zum Auswählen, dann auf Canvas zum Pflanzen. Tracke Samen und Klone separat.',
    },
    viewSwitch: {
      label: 'Ansicht',
      desc: 'Wechsle zwischen Space (XY) und Timeline (XT) Ansichten. Verschiedene Perspektiven, gleiche Daten.',
    },
    features: [
      {
        title: 'Perpetual Harvest',
        desc: 'Staffele Pflanzen für kontinuierliche Ernten. Immer etwas bereit.',
      },
      {
        title: 'Sorten-Katalog',
        desc: 'Eigene Sorten mit Veg/Blüte-Tagen. Auto-generierte Pflanzencodes.',
      },
      {
        title: 'Lebenszyklus',
        desc: 'GRM → SDL → VEG → FLW → HRV. Dauer pro Sorte anpassbar.',
      },
      {
        title: 'JSON Export/Import',
        desc: 'Exportiere deine Plantagen-Daten. Perfekt für KI-Agenten und Automatisierungen.',
      },
    ],
  },
};

const labels = t[lang];
---

<section class="features-section">
  <h2 class="headline">{labels.headline}</h2>

  <!-- Space View - Demo Left -->
  <div class="view-block">
    <div class="demo-side">
      <div class="demo-frame">
        <SpaceDemo spaces={spaceData} />
      </div>
    </div>
    <div class="content-side">
      <div class="view-badge">
        <span class="badge-label">{labels.space.subtitle}</span>
      </div>
      <h3 class="view-title">{labels.space.title}</h3>
      <p class="view-desc">{labels.space.desc}</p>
    </div>
  </div>

  <!-- Timeline View - Demo Above Text -->
  <div class="view-block stacked">
    <div class="demo-side timeline-full">
      <div class="demo-frame">
        <TimelineDemo spaces={timelineSpaces} plants={timelinePlants} width={800} />
      </div>
    </div>
    <div class="content-side centered">
      <div class="view-badge">
        <span class="badge-label">{labels.time.subtitle}</span>
      </div>
      <h3 class="view-title">{labels.time.title}</h3>
      <p class="view-desc">{labels.time.desc}</p>
    </div>
  </div>

  <!-- Interactive Hotbar Demo -->
  <div class="hotbar-demo">
    <div class="hotbar-container">
      <!-- Toolbox Section -->
      <div class="hotbar-section" data-section="toolbox">
        <span class="section-label">{labels.toolbox.label}</span>
        <div class="tool-buttons">
          <div class="tool-btn-wrapper">
            <button class="tool-btn active" data-tool="cursor">
              <svg class="tool-icon" viewBox="0 0 24 24" fill="none">
                <path d="M4.80371 4.80371C4.93868 4.66932 5.1214 4.62065 5.30273 4.66797H5.30371L18.7402 8.15039C19.0267 8.22458 19.2345 8.42704 19.3145 8.7002L19.3408 8.82129V8.82227C19.3896 9.15667 19.2452 9.46095 18.9551 9.63574L15.7041 11.5938L14.9922 12.0225L18.4482 15.4785C18.6136 15.644 18.7031 15.8609 18.7031 16.0957C18.7031 16.3305 18.6136 16.5474 18.4482 16.7129L16.7129 18.4473V18.4482C16.3727 18.7881 15.8187 18.7874 15.4785 18.4473L12.6104 15.5801L12.0225 14.9922L11.5938 15.7041L9.63574 18.9551V18.9561C9.48238 19.2115 9.22938 19.3495 8.94922 19.3496C8.90771 19.3496 8.86621 19.347 8.8252 19.3408H8.82227C8.52873 19.2979 8.29975 19.12 8.19043 18.8574L8.15137 18.7393L4.66797 5.30371C4.62034 5.11932 4.67061 4.93648 4.80371 4.80371Z" stroke="currentColor" stroke-width="1.3"/>
              </svg>
            </button>
            <span class="tool-label">{labels.toolbox.cursor.name}</span>
          </div>
          <div class="tool-btn-wrapper">
            <button class="tool-btn" data-tool="space">
              <svg class="tool-icon" viewBox="0 0 24 24" fill="none">
                <path fill-rule="evenodd" clip-rule="evenodd" d="M19.876 3H4.124C3.82622 3.00105 3.54094 3.11981 3.33038 3.33038C3.11981 3.54094 3.00105 3.82622 3 4.124V19.876C3.00105 20.1738 3.11981 20.4591 3.33038 20.6696C3.54094 20.8802 3.82622 20.9989 4.124 21H19.876C20.1738 20.9989 20.4591 20.8802 20.6696 20.6696C20.8802 20.4591 20.9989 20.1738 21 19.876V4.124C20.9989 3.82622 20.8802 3.54094 20.6696 3.33038C20.4591 3.11981 20.1738 3.00105 19.876 3ZM19.876 19.31C19.876 19.4601 19.8164 19.6041 19.7102 19.7102C19.6041 19.8164 19.4601 19.876 19.31 19.876H4.69C4.53989 19.876 4.39592 19.8164 4.28978 19.7102C4.18363 19.6041 4.124 19.4601 4.124 19.31V4.69C4.124 4.53989 4.18363 4.39592 4.28978 4.28978C4.39592 4.18363 4.53989 4.124 4.69 4.124H19.31C19.4601 4.124 19.6041 4.18363 19.7102 4.28978C19.8164 4.39592 19.876 4.53989 19.876 4.69V19.31Z" fill="currentColor"/>
                <path d="M11.0198 12.9802H8V11.0198H11.0198V8H12.9802V11.0198H16V12.9802H12.9802V16H11.0198V12.9802Z" fill="currentColor"/>
              </svg>
            </button>
            <span class="tool-label">{labels.toolbox.space.name}</span>
          </div>
          <div class="tool-btn-wrapper">
            <button class="tool-btn" data-tool="split">
              <svg class="tool-icon" viewBox="0 0 24 24" fill="none">
                <path d="M22.3681 3.74315H13.9444C13.4448 3.06685 12.644 2.63281 11.7439 2.63281C10.2281 2.63281 9 3.8643 9 5.37672C9 6.88914 10.2281 8.12063 11.7439 8.12063C12.6439 8.12063 13.4448 7.68491 13.9444 7.01029H22.3681C23.2681 7.01029 24 6.27848 24 5.3784C24 4.47837 23.2682 3.74651 22.3681 3.74651V3.74315ZM11.7424 7.25759C10.7043 7.25759 9.85981 6.41307 9.85981 5.37504C9.85981 4.33702 10.7043 3.49249 11.7424 3.49249C12.7804 3.49249 13.6199 4.33702 13.6199 5.37504C13.6199 6.41307 12.7753 7.25759 11.7424 7.25759Z" fill="currentColor"/>
                <path d="M1.5231 15.0363H9.3852C9.85156 14.4051 10.5989 14 11.439 14C12.8537 14 14 15.1494 14 16.561C14 17.9726 12.8537 19.122 11.439 19.122C10.599 19.122 9.85156 18.7153 9.3852 18.0856H1.5231C0.683066 18.0856 0 17.4026 0 16.5625C0 15.7225 0.683026 15.0395 1.5231 15.0395V15.0363ZM11.4405 18.3165C12.4093 18.3165 13.1975 17.5282 13.1975 16.5594C13.1975 15.5906 12.4093 14.8024 11.4405 14.8024C10.4716 14.8024 9.68812 15.5906 9.68812 16.5594C9.68812 17.5282 10.4763 18.3165 11.4405 18.3165Z" fill="currentColor"/>
                <path fill-rule="evenodd" clip-rule="evenodd" d="M11.566 12.3731C11.4543 12.3727 11.345 12.4054 11.2519 12.4673C11.1588 12.5291 11.0863 12.6172 11.0433 12.7203C11.0004 12.8234 10.989 12.937 11.0107 13.0466C11.0324 13.1562 11.0862 13.2569 11.1652 13.3359C11.2442 13.4149 11.3449 13.4686 11.4545 13.4903C11.5641 13.512 11.6776 13.5007 11.7808 13.4577C11.8839 13.4148 11.972 13.3422 12.0338 13.2491C12.0956 13.1561 12.1284 13.0468 12.128 12.9351C12.128 12.8612 12.1135 12.7882 12.0852 12.72C12.057 12.6518 12.0156 12.5898 11.9634 12.5377C11.9112 12.4855 11.8492 12.4441 11.7811 12.4158C11.7129 12.3876 11.6398 12.3731 11.566 12.3731Z" fill="currentColor"/>
                <path fill-rule="evenodd" clip-rule="evenodd" d="M11.5659 10.6856C11.4548 10.6856 11.3461 10.7185 11.2537 10.7803C11.1613 10.842 11.0892 10.9298 11.0467 11.0325C11.0041 11.1352 10.993 11.2482 11.0147 11.3572C11.0364 11.4662 11.0899 11.5663 11.1685 11.6449C11.2471 11.7235 11.3472 11.7771 11.4563 11.7988C11.5653 11.8204 11.6783 11.8093 11.781 11.7668C11.8837 11.7242 11.9714 11.6522 12.0332 11.5598C12.0949 11.4674 12.1279 11.3587 12.1279 11.2476C12.1282 11.1737 12.1138 11.1005 12.0857 11.0322C12.0575 10.9639 12.0161 10.9018 11.9639 10.8496C11.9117 10.7973 11.8496 10.7559 11.7813 10.7278C11.713 10.6996 11.6398 10.6853 11.5659 10.6856Z" fill="currentColor"/>
                <path fill-rule="evenodd" clip-rule="evenodd" d="M11.5659 9C11.4548 9 11.3461 9.03296 11.2537 9.09472C11.1613 9.15647 11.0892 9.24424 11.0467 9.34694C11.0041 9.44963 10.993 9.56263 11.0147 9.67165C11.0364 9.78066 11.0899 9.8808 11.1685 9.9594C11.2471 10.038 11.3472 10.0915 11.4563 10.1132C11.5653 10.1349 11.6783 10.1238 11.781 10.0812C11.8837 10.0387 11.9714 9.96666 12.0332 9.87423C12.0949 9.78181 12.1279 9.67316 12.1279 9.562C12.1282 9.48813 12.1138 9.41493 12.0857 9.34662C12.0575 9.27832 12.0161 9.21626 11.9639 9.16402C11.9117 9.11178 11.8496 9.0704 11.7813 9.04225C11.713 9.0141 11.6398 8.99974 11.5659 9Z" fill="currentColor"/>
              </svg>
            </button>
            <span class="tool-label">{labels.toolbox.split.name}</span>
          </div>
          <div class="tool-btn-wrapper">
            <button class="tool-btn" data-tool="erase">
              <svg class="tool-icon" viewBox="0 0 24 24" fill="none">
                <path d="M20.3418 7.6355L16.3643 3.65813C15.4846 2.78062 14.0613 2.78062 13.1815 3.65813L3.65816 13.1811C2.78061 14.0608 2.78061 15.4839 3.65816 16.3637L7.63645 20.3419C8.51546 21.2194 9.93941 21.2194 10.8185 20.3419L20.3418 10.8182C21.2194 9.93922 21.2194 8.51532 20.3418 7.6355ZM19.5463 10.0226L13.6028 15.9658C13.1633 16.4046 12.4513 16.4046 12.0118 15.9658L8.03351 11.9877C7.59474 11.5482 7.59474 10.8363 8.03351 10.3968L13.977 4.4535C14.4165 4.01475 15.1285 4.01475 15.568 4.4535L19.5463 8.43162C19.9851 8.87111 19.9851 9.58234 19.5463 10.0226Z" fill="currentColor"/>
              </svg>
            </button>
            <span class="tool-label">{labels.toolbox.erase.name}</span>
          </div>
        </div>
      </div>

      <!-- Seeds Section -->
      <div class="hotbar-section" data-section="seeds">
        <span class="section-label">{labels.seeds.label}</span>
        <div class="seed-slots">
          <div class="seed-slot-wrapper">
            <button class="seed-slot filled">
              <span class="seed-abbr">GRZ</span>
            </button>
            <span class="seed-count">Sx5</span>
          </div>
          <div class="seed-slot-wrapper">
            <button class="seed-slot filled selected">
              <span class="seed-abbr">BLU</span>
            </button>
            <span class="seed-count">Sx3</span>
          </div>
          <div class="seed-slot-wrapper">
            <button class="seed-slot empty">
              <span class="plus">+</span>
            </button>
            <span class="seed-count">Add</span>
          </div>
        </div>
      </div>

      <!-- View Switch -->
      <div class="hotbar-section" data-section="view">
        <span class="section-label">{labels.viewSwitch.label}</span>
        <div class="view-switch-wrapper">
          <div class="view-switch">
            <button class="view-btn active">XY</button>
            <button class="view-btn">XT</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Tool Description Panel -->
    <div class="tool-info">
      <p class="tool-info-text" data-default="true">
        <span class="tool-info-highlight">Click any element</span> to learn what it does
      </p>
      <p class="tool-info-text" data-tool="cursor" style="display: none;">
        <span class="tool-info-highlight">Cursor</span> — {labels.toolbox.cursor.desc}
      </p>
      <p class="tool-info-text" data-tool="space" style="display: none;">
        <span class="tool-info-highlight">Space</span> — {labels.toolbox.space.desc}
      </p>
      <p class="tool-info-text" data-tool="split" style="display: none;">
        <span class="tool-info-highlight">Split</span> — {labels.toolbox.split.desc}
      </p>
      <p class="tool-info-text" data-tool="erase" style="display: none;">
        <span class="tool-info-highlight">Erase</span> — {labels.toolbox.erase.desc}
      </p>
      <p class="tool-info-text" data-section="seeds" style="display: none;">
        <span class="tool-info-highlight">Seeds</span> — {labels.seeds.desc}
      </p>
      <p class="tool-info-text" data-section="view" style="display: none;">
        <span class="tool-info-highlight">View Switch</span> — {labels.viewSwitch.desc}
      </p>
    </div>
  </div>

  <!-- Additional Features -->
  <div class="features-grid">
    {labels.features.map((feature) => (
      <div class="feature-card">
        <h4 class="feature-title">{feature.title}</h4>
        <p class="feature-desc">{feature.desc}</p>
      </div>
    ))}
  </div>
</section>

<style>
  .features-section {
    padding: var(--spacing-2xl) var(--spacing-md);
    max-width: 640px;
    margin: 0 auto;
  }

  .headline {
    font-size: clamp(20px, 4vw, 32px);
    color: var(--color-teal);
    margin-bottom: var(--spacing-2xl);
  }

  /* View Blocks - Large Screenshots */
  .view-block {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-lg);
    margin-bottom: var(--spacing-2xl);
  }

  @media (min-width: 768px) {
    .view-block {
      flex-direction: row;
      align-items: center;
      gap: var(--spacing-xl);
    }

    .view-block.reverse {
      flex-direction: row-reverse;
    }
  }

  .demo-side {
    flex: 1.5;
    min-width: 0;
  }

  .demo-side.timeline {
    flex: 2;
  }

  /* Stacked layout - demo above text */
  .view-block.stacked {
    flex-direction: column;
  }

  .demo-side.timeline-full {
    width: 100%;
  }

  .content-side.centered {
    max-width: 500px;
  }

  .content-side {
    flex: 1;
    min-width: 0;
  }

  .demo-frame {
    overflow: hidden;
    background: var(--color-background-dark);
  }

  .demo-frame :global(svg) {
    width: 100%;
    height: auto;
    display: block;
  }

  .view-badge {
    display: inline-flex;
    margin-bottom: var(--spacing-sm);
  }

  .badge-label {
    background: var(--color-teal);
    color: var(--color-background-dark);
    font-size: 12px;
    font-weight: 700;
    padding: 4px 12px;
    letter-spacing: 0.05em;
  }

  .view-title {
    font-size: var(--font-size-xl);
    color: var(--color-text);
    margin-bottom: var(--spacing-sm);
    text-transform: uppercase;
    letter-spacing: 0.02em;
  }

  .view-desc {
    font-family: var(--font-family-sans);
    font-size: 15px;
    color: var(--color-text-muted);
    line-height: 1.6;
    margin: 0;
  }

  /* Hotbar Demo */
  .hotbar-demo {
    margin: var(--spacing-3xl) 0;
    padding: var(--spacing-lg);
    background: var(--color-background-dark);
    border: 1px solid var(--color-border);
    border-radius: var(--border-radius);
  }

  .hotbar-container {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: var(--spacing-sm);
  }

  .hotbar-section {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 8px 12px 12px;
    background: var(--color-background-dark);
    border: 1px solid var(--color-border);
    cursor: pointer;
    transition: border-color var(--transition-fast);
  }

  .hotbar-section:hover {
    border-color: var(--color-teal);
  }

  .section-label {
    font-size: 10px;
    color: var(--color-text-muted);
    text-transform: uppercase;
    margin-bottom: 6px;
    letter-spacing: 0.05em;
  }

  /* Tool Buttons */
  .tool-buttons {
    display: flex;
    gap: 6px;
  }

  .tool-btn-wrapper {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 4px;
  }

  .tool-btn {
    width: 44px;
    height: 44px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: #1e5a38;
    border: 1px solid var(--color-border);
    color: var(--color-text);
    cursor: pointer;
    transition: all var(--transition-fast);
    padding: 0;
  }

  .tool-btn:hover {
    border-color: var(--color-teal);
  }

  .tool-btn.active {
    background: var(--color-teal);
    border-color: var(--color-teal);
    color: var(--color-background-dark);
  }

  .tool-icon {
    width: 20px;
    height: 20px;
  }

  .tool-label {
    font-size: 10px;
    text-transform: uppercase;
    color: var(--color-text-muted);
  }

  /* Seed Slots */
  .seed-slots {
    display: flex;
    gap: 6px;
  }

  .seed-slot-wrapper {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 4px;
  }

  .seed-slot {
    width: 44px;
    height: 44px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: transparent;
    border: 1px dashed var(--color-border);
    color: var(--color-text-muted);
    cursor: pointer;
    transition: all var(--transition-fast);
    padding: 0;
  }

  .seed-slot.filled {
    background: #1e5a38;
    border: 1px solid var(--color-border);
    color: var(--color-text);
  }

  .seed-slot.filled.selected {
    background: var(--color-green);
    border-color: var(--color-green);
  }

  .seed-slot:hover {
    border-color: var(--color-teal);
  }

  .seed-abbr {
    font-size: 14px;
    font-weight: 700;
  }

  .seed-count {
    font-size: 10px;
    text-transform: uppercase;
    color: var(--color-text-muted);
  }

  .plus {
    font-size: 20px;
  }

  /* View Switch */
  .view-switch-wrapper {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 4px;
  }

  .view-switch {
    display: flex;
    flex-direction: column;
    width: 44px;
    border: 1px solid var(--color-muted);
  }

  .view-btn {
    width: 100%;
    height: 22px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: transparent;
    border: none;
    border-bottom: 1px solid var(--color-muted);
    color: var(--color-muted);
    font-size: 12px;
    font-weight: 700;
    font-family: inherit;
    cursor: pointer;
    transition: all var(--transition-fast);
  }

  .view-btn:last-child {
    border-bottom: none;
  }

  .view-btn.active {
    background: var(--color-teal);
    border-color: var(--color-teal);
    color: var(--color-background-dark);
  }

  .view-btn:hover:not(.active) {
    color: var(--color-text);
  }

  /* Tool Info Panel */
  .tool-info {
    margin-top: var(--spacing-md);
    padding: var(--spacing-md);
    background: #15472C;
    border-radius: var(--border-radius);
    min-height: 60px;
    display: flex;
    align-items: center;
  }

  .tool-info-text {
    font-family: var(--font-family-sans);
    font-size: 14px;
    color: var(--color-text-muted);
    margin: 0;
    line-height: 1.5;
  }

  .tool-info-highlight {
    color: var(--color-teal);
    font-weight: 600;
  }

  /* Features Grid */
  .features-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: var(--spacing-md);
    margin-top: var(--spacing-2xl);
  }

  @media (min-width: 640px) {
    .features-grid {
      grid-template-columns: repeat(4, 1fr);
    }
  }

  .feature-card {
    padding: var(--spacing-md);
    background: var(--color-background-dark);
    border: 1px solid var(--color-border);
    border-radius: var(--border-radius);
    transition: border-color var(--transition-fast);
  }

  .feature-card:hover {
    border-color: var(--color-green);
  }

  .feature-title {
    font-size: var(--font-size-sm);
    color: var(--color-text);
    margin: 0 0 var(--spacing-xs);
  }

  .feature-desc {
    font-family: var(--font-family-sans);
    font-size: 13px;
    color: var(--color-text-muted);
    line-height: 1.5;
    margin: 0;
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const toolBtns = document.querySelectorAll('.tool-btn');
    const seedSlots = document.querySelectorAll('.seed-slot');
    const viewBtns = document.querySelectorAll('.view-btn');
    const hotbarSections = document.querySelectorAll('.hotbar-section');
    const infoTexts = document.querySelectorAll('.tool-info-text');

    function showInfo(selector: string) {
      infoTexts.forEach(el => {
        (el as HTMLElement).style.display = 'none';
      });
      const target = document.querySelector(`.tool-info-text[${selector}]`) as HTMLElement;
      if (target) target.style.display = 'block';
    }

    toolBtns.forEach(btn => {
      btn.addEventListener('click', (e) => {
        e.stopPropagation();
        toolBtns.forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        const tool = btn.getAttribute('data-tool');
        if (tool) showInfo(`data-tool="${tool}"`);
      });
    });

    seedSlots.forEach(slot => {
      slot.addEventListener('click', (e) => {
        e.stopPropagation();
        seedSlots.forEach(s => s.classList.remove('selected'));
        if (slot.classList.contains('filled')) {
          slot.classList.add('selected');
        }
        showInfo('data-section="seeds"');
      });
    });

    viewBtns.forEach(btn => {
      btn.addEventListener('click', (e) => {
        e.stopPropagation();
        viewBtns.forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        showInfo('data-section="view"');
      });
    });

    hotbarSections.forEach(section => {
      section.addEventListener('click', () => {
        const sectionType = section.getAttribute('data-section');
        if (sectionType === 'seeds') {
          showInfo('data-section="seeds"');
        } else if (sectionType === 'view') {
          showInfo('data-section="view"');
        }
      });
    });
  });
</script>
