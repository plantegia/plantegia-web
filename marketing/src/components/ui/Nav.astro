---
import LanguageSwitcher from './LanguageSwitcher.astro';
import Logo from './Logo.astro';

interface Props {
  currentPath: string;
  lang: 'en' | 'de';
}

const { currentPath, lang } = Astro.props;

const t = {
  en: {
    home: 'Home',
    guides: 'Guides',
    tools: 'Tools',
    app: 'Open App',
  },
  de: {
    home: 'Start',
    guides: 'Anleitungen',
    tools: 'Tools',
    app: 'App Ã¶ffnen',
  },
};

const labels = t[lang];
const prefix = lang === 'de' ? '/de' : '';

const links = [
  { href: `${prefix}/`, label: labels.home },
  { href: `${prefix}/guides/`, label: labels.guides },
  { href: `${prefix}/tools/`, label: labels.tools },
];

const isActive = (href: string) => {
  if (href === '/' || href === '/de/') {
    return currentPath === href;
  }
  return currentPath.startsWith(href);
};
---

<nav class="nav">
  <div class="nav-container">
<Logo href={prefix || '/'} />

    <div class="nav-links">
      {links.map((link) => (
        <a
          href={link.href}
          class={`nav-link ${isActive(link.href) ? 'active' : ''}`}
        >
          {link.label}
        </a>
      ))}
    </div>

    <div class="nav-actions">
      <LanguageSwitcher currentPath={currentPath} lang={lang} />
      <a href="/p/" class="app-link">
        {labels.app}
      </a>
    </div>
  </div>
</nav>

<style>
  .nav {
    position: sticky;
    top: 0;
    z-index: 100;
    background: var(--color-background);
    border-bottom: 1px solid var(--color-border);
  }

  .nav-container {
    display: flex;
    align-items: center;
    justify-content: space-between;
    max-width: 1200px;
    margin: 0 auto;
    padding: var(--spacing-md);
    gap: var(--spacing-md);
  }

  .nav-links {
    display: flex;
    gap: var(--spacing-lg);
  }

  .nav-link {
    color: var(--color-text-muted);
    text-decoration: none;
    font-size: var(--font-size-sm);
    transition: color var(--transition-fast);
  }

  .nav-link:hover,
  .nav-link.active {
    color: var(--color-text);
  }

  .nav-link.active {
    border-bottom: 2px solid var(--color-green);
    padding-bottom: 2px;
  }

  .nav-actions {
    display: flex;
    align-items: center;
    gap: var(--spacing-md);
  }

  .app-link {
    background: var(--color-green);
    color: var(--color-text);
    padding: var(--spacing-xs) var(--spacing-md);
    border-radius: var(--border-radius);
    font-size: var(--font-size-sm);
    font-weight: 700;
    text-decoration: none;
    transition: background var(--transition-fast);
  }

  .app-link:hover {
    background: var(--color-orange);
  }

  @media (max-width: 640px) {
    .nav-links {
      display: none;
    }

    .nav-container {
      justify-content: space-between;
    }
  }
</style>
