---
interface Props {
  code: string;
  strain?: string;
  stage: 'germinating' | 'seedling' | 'vegetative' | 'flowering' | 'harvested';
  daysInStage?: number;
  lang?: 'en' | 'de';
}

const { code, strain, stage, daysInStage, lang = 'en' } = Astro.props;

const stageColors: Record<string, string> = {
  germinating: '#a08060',
  seedling: '#6aA050',
  vegetative: '#51853B',
  flowering: '#15472C',
  harvested: '#3a3530',
};

const stageLabels = {
  en: {
    germinating: 'Germinating',
    seedling: 'Seedling',
    vegetative: 'Vegetative',
    flowering: 'Flowering',
    harvested: 'Harvested',
    day: 'day',
    days: 'days',
  },
  de: {
    germinating: 'Keimen',
    seedling: 'Sämling',
    vegetative: 'Vegetativ',
    flowering: 'Blüte',
    harvested: 'Geerntet',
    day: 'Tag',
    days: 'Tage',
  },
};

const labels = stageLabels[lang];
const daysLabel = daysInStage === 1 ? labels.day : labels.days;
---

<div class="plant-card" style={`--stage-color: ${stageColors[stage]}`}>
  <div class="plant-code">{code}</div>
  {strain && <div class="plant-strain">{strain}</div>}
  <div class="plant-stage">
    <span class="stage-dot"></span>
    {labels[stage]}
  </div>
  {daysInStage !== undefined && (
    <div class="plant-days">{daysInStage} {daysLabel}</div>
  )}
</div>

<style>
  .plant-card {
    display: inline-block;
    background: var(--color-background-dark);
    border: 2px solid var(--stage-color);
    border-radius: var(--border-radius);
    padding: var(--spacing-sm) var(--spacing-md);
    font-family: var(--font-family);
    text-align: center;
  }

  .plant-code {
    font-weight: 700;
    font-size: var(--font-size-lg);
    margin-bottom: var(--spacing-xs);
  }

  .plant-strain {
    font-size: var(--font-size-sm);
    color: var(--color-text-muted);
    margin-bottom: var(--spacing-sm);
  }

  .plant-stage {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--spacing-xs);
    font-size: var(--font-size-sm);
  }

  .stage-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: var(--stage-color);
  }

  .plant-days {
    font-size: 12px;
    color: var(--color-text-muted);
    margin-top: var(--spacing-xs);
  }
</style>
