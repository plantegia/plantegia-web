---
import { getCollection } from 'astro:content';
import BaseLayout from '../../../layouts/BaseLayout.astro';
import PostList from '../../../components/blog/PostList.astro';
import { getTranslations, getNonDefaultLocales, type Locale } from '../../../i18n';

export function getStaticPaths() {
  return getNonDefaultLocales().map(lang => ({ params: { lang } }));
}

const { lang } = Astro.params as { lang: Locale };
const t = getTranslations(lang).pages.guides;

const posts = await getCollection('guides', ({ data }: { data: { lang: string } }) => data.lang === lang);
---

<BaseLayout
  title={t.title}
  description={t.description}
  keywords={t.keywords}
  lang={lang}
>
  <div class="blog-page">
    <header class="blog-header">
      <h1>{t.headerTitle}</h1>
      <p>{t.headerSubtitle}</p>
    </header>

    <PostList posts={posts} lang={lang} />
  </div>
</BaseLayout>

<style>
  .blog-page {
    max-width: 1200px;
    margin: 0 auto;
    padding: var(--spacing-2xl) var(--spacing-md);
  }

  .blog-header {
    text-align: center;
    margin-bottom: var(--spacing-2xl);
  }

  .blog-header h1 {
    font-size: var(--font-size-2xl);
    margin-bottom: var(--spacing-md);
  }

  .blog-header p {
    color: var(--color-text-muted);
    font-size: var(--font-size-lg);
    max-width: 600px;
    margin: 0 auto;
  }
</style>
