---
import ToolLayout from '../../../layouts/ToolLayout.astro';
import PerpetualCalculatorComponent from '../../../components/tools/PerpetualCalculator';
import { getTranslations, getNonDefaultLocales, type Locale } from '../../../i18n';

export function getStaticPaths() {
  return getNonDefaultLocales().map(lang => ({ params: { lang } }));
}

const { lang } = Astro.params as { lang: Locale };
const t = getTranslations(lang).pages.perpetualCalculator;
---

<ToolLayout
  title={t.title}
  description={t.description}
  keywords={t.keywords}
  lang={lang}
>
  <PerpetualCalculatorComponent lang={lang} client:load />

  <section class="how-it-works">
    <h2>{t.howItWorks.title}</h2>
    <p>{t.howItWorks.intro}</p>

    <h3>{t.howItWorks.keyConcepts.title}</h3>
    <ul>
      {t.howItWorks.keyConcepts.items.map(item => (
        <li>
          <strong>{item.term}:</strong> {item.definition}
        </li>
      ))}
    </ul>

    <h3>{t.howItWorks.exampleSetup.title}</h3>
    <p>{t.howItWorks.exampleSetup.content}</p>

    <h3>{t.howItWorks.twoTentSetup.title}</h3>
    <p>{t.howItWorks.twoTentSetup.content}</p>
  </section>
</ToolLayout>

<style>
  .how-it-works {
    max-width: 65ch;
    margin: var(--spacing-2xl) auto 0;
    padding-top: var(--spacing-xl);
    border-top: 1px solid var(--color-border);
  }

  .how-it-works h2 {
    font-size: var(--font-size-xl);
    margin-bottom: var(--spacing-md);
  }

  .how-it-works h3 {
    font-size: var(--font-size-lg);
    margin-top: var(--spacing-xl);
    margin-bottom: var(--spacing-sm);
  }

  .how-it-works p {
    color: var(--color-text-muted);
  }

  .how-it-works ul {
    color: var(--color-text-muted);
  }

  .how-it-works strong {
    color: var(--color-text);
  }
</style>
